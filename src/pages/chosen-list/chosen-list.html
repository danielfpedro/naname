<!--
  Generated template for the ChosenListPage page.

  See http://ionicframework.com/docs/components/#navigation for more info on
  Ionic pages and navigation.
-->
<ion-header>
  <ion-navbar>
    <ion-buttons start>
      <button ion-button (click)="openAddName()">
        Add name
      </button>
    </ion-buttons>
  </ion-navbar>
</ion-header>

<ion-content>
  <p *ngIf="names.length < 1">
    Você ainda não escolheu nenhum nome.
  </p>

  <div>
    <ion-segment [(ngModel)]="gender">
      <ion-segment-button value="m">
        Masculino
      </ion-segment-button>
      <ion-segment-button value="f">
        Feminimo
      </ion-segment-button>
    </ion-segment>
  </div>

  <ion-searchbar [(ngModel)]="term"></ion-searchbar>

  <ion-list>
    <ion-item
      *ngFor="
        let name of (names | orderBy: 'votes':true | search: 'name':term:gender)
      "
      (click)="onNameClick(name)"
      (press)="presentNameActionSheetOption(name)"
    >
      {{ name.name }}
      <h2>Votes: {{ name.votes }}</h2>
      <h2>{{ name.porcentage }}%</h2>
      <ion-avatar *ngFor="let owner of name.ownersProfiles" item-end>
        <img [src]="owner.profilePhotoURL" />
      </ion-avatar>
    </ion-item>
  </ion-list>
</ion-content>

<ion-footer [hidden]="names.length < 2">
  <ion-toolbar>
    <button ion-button block (click)="share()">Compartilhar enquete</button>
  </ion-toolbar>
</ion-footer>
